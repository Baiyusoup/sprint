---
title: https
date: 2021-07-20
categories: 
 - 计算机网络
---

## 握手过程
1. 客户端给出协议版本号、一个随机数以及支持的加密方法
2. 服务端确认双方使用的加密算法，并给出数字证书以及一个服务端生成的随机数
3. 客户端确认数字证书有效，然后生成一个新的随机数，并使用数字证书中的公钥，加密这个随机数，然后发送服务端。
4. 服务端用自己的私钥，来获取客户端发来的随机数
5. 客户端和服务端根据约定的加密方法，使用前面那三个随机数，生成一个密钥，来用加密接下来的整个对话过程。

## HTTPS的安全原理
HTTPS是由HTTP和SSL/TLS组成的。SSL/TLS的功能实现主要依赖：数字签名、散列函数、对称加密和非对称加密。

非对称加密负责实现身份认证和密钥协商；对称加密算法采用协商的密钥对数据加密；散列函数则负责验证信息的完整性，数字签名负责身份验证。

### 对称加密
加密和解密使用的密钥是同一个。

### 非对称加密
存在两个密钥，一个公钥，另一个叫私钥。这两个密钥是不同的，公钥可以公开给任何人使用，私钥则需要保密。

虽然两个密钥都可以用来加密解密，但是公钥加密只能用私钥解密，而私钥加密，之恶能用公钥来解密。

## 摘要算法
通过散列函数将任意长度的数据“压缩”成固定长度、而且独一无二的“摘要”字符串。而且摘要算法能保证了生成的“数字摘要”和原文是完全等价的。所以，我们只要在原文后附上它的摘要，就能够保证数据的完整性。

## 数字签名
数字签名能确定消息确实是由发送方签名并发出来的。原理其实很简单，就是用私钥加密，公钥解密，并使用数字证书来保证公钥的正确性。

### 数字证书
网站将自己的公钥注册到CA，然后CA用自己的私钥将服务器的公钥数字签名，并颁发数字证书。客户端拿到浏览器的数字证书后，使用CA的公钥确认服务器的数字证书的真实性，而这个CA的公钥已经事先存在于浏览器或者操作系统中。