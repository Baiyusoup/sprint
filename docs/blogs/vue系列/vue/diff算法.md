---
title: diff算法
date: 2021-07-21
categories: 
 - vue系列
---

## 作用
diff算法的核心在于在尽可能小变动的前提下找到需要更新的节点，直接调用原生相关DOM方法修改视图。算法比较节点不同时，只会进行同层节点的比较，不会跨层进行比较，这也大大减少了算法复杂度。

## 原理
简单来说，过程大概就是同级比较，在比较子节点
1. 先是新节点是不是文本节点，用新节点的文本替换掉旧节点的文本。
2. 然后判断一方有子节点，另一个方没有子节点的情况，在这种情况下，只需要将旧节点的子节点删除或者替换掉就行了
3. 如果双方都有子节点的话，那么进行子节点的比较以及递归比较

在比较双方的子节点时，采用的做法是双端比较，同时从新旧节点的children的两端开始比较，不断地往中间逼近，新前和新前、新后与新后、新后与旧前，新前与旧后比较，以及通过节点的key找到可复用的节点，进行相关操作。